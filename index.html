<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>GirlPower</title>

  <!-- Auto-refresh page every 3600 seconds (1 hour) -->
  <meta http-equiv="refresh" content="3600">

  <style>
    body {
      margin: 0;
      background: black;
      overflow: hidden;
    }
    video {
      position: absolute;
      width: 100vw;
      height: 100vh;
      object-fit: contain;
    }
    #video1 { z-index: 1; }
    #video2 { z-index: 0; }
    .info {
      position: absolute;
      bottom: 10px;
      left: 10px;
      color: white;
      font-family: sans-serif;
      font-size: 14px;
      opacity: 0.5;
    }
  </style>
</head>
<body>
  <video id="video1" autoplay muted playsinline></video>
  <video id="video2" muted playsinline></video>

  <!-- Optional user message -->
  <div class="info">Trwa odtwarzanie materiału wideo. Proszę nie wyłączać urządzenia.</div>

  <script>
    // List of video files to play in loop
    const playlist = [
      "video1.mp4",
      "video2.mp4",
      "video3.mp4"
    ];

    let current = 0;
    let activeVideo = document.getElementById("video1");
    let nextVideo = document.getElementById("video2");

    // Play the next video with seamless transition
    function playNext() {
      current = (current + 1) % playlist.length;

      nextVideo.src = playlist[current];
      nextVideo.load();
      nextVideo.oncanplaythrough = () => {
        nextVideo.play();
        activeVideo.pause();
        activeVideo.style.zIndex = 0;
        nextVideo.style.zIndex = 1;

        // Swap active and next video
        [activeVideo, nextVideo] = [nextVideo, activeVideo];

        // Set next callback
        activeVideo.onended = playNext;
      };
    }

    // Start the first video
    activeVideo.src = playlist[current];
    activeVideo.onended = playNext;
    activeVideo.load();
    activeVideo.play();

    // Periodically check for updates and reload page if needed
    setInterval(() => {
      fetch(window.location.href, { method: 'HEAD', cache: 'no-store' })
        .then(response => {
          if (response.ok) {
            location.reload();
          }
        })
        .catch(err => console.log('Update check failed', err));
    }, 60000); // Check every 60 seconds
  </script>
</body>
</html>
